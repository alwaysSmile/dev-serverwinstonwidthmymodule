//Данный модуль экспортирует функцию, которая принимает модуль - module,
//для которого нужно сделать логирование
var winston = require('winston');

module.exports = function (module) {
    return makeLogger(module.filename)//Возвращает winston настроенный соответственно его пути
};
//Ниже используется концепция транспортов - это нечто, что умеет передавать ин-фу
function makeLogger(path) {

    if (path.match(/request.js$/)) {
        var transports = [//1. Это встроенный
            new winston.transports.Console({
                timestamp: true,
                colorize: true,
                level: 'info'
            }),

            new winston.transports.File({filename: 'debug.log', level: 'debug'})//2. Записывает в 'debug.log' и будет использоваться для сообщений debug и выше(для всех)
        ];

        return new winston.Logger({transports: transports});

    } else{

        return new winston.Logger({
            transports: []
        });
    }
}